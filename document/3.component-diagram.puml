@startuml VetConsultationSystem

skinparam componentStyle rectangle
skinparam shadowing false

title 수의사 온라인 상담 플랫폼 - 컴포넌트 다이어그램

actor "반려동물 보호자" as User
actor "수의사" as Vet
actor "관리자" as Admin

package "Client" {
  component "Web Client" as Web
}

package "Backend Services" {
  component "Auth Module\n(JWT)" as Auth
  component "Consultation Module(상태 관리)" as Consult
  component "Matching Module" as Match
  component "Chat Module\n(WebSocket)" as Chat
  component "Report Module" as Report
}

package "Infrastructure" {
  database "MySQL" as MySQL
  database "Redis" as Redis
  queue "Kafka\n(Event Stream)" as Kafka
}

' ===== Client → Backend =====
User --> Web
Vet --> Web
Admin --> Web

Web --> Auth
Web --> Consult
Web --> Chat

' ===== Database =====
Auth --> MySQL
Consult --> MySQL
Match --> MySQL
Report --> MySQL

' ===== Redis (state / lock / cache) =====
Consult --> Redis : 상담 상태 캐시
Match --> Redis : 매칭 락 / 수의사 접속 상태

' ===== Kafka (event only) =====
Chat --> Kafka : 채팅 메시지 이벤트
Consult --> Kafka : 상담 상태 변경 이벤트
Report --> Kafka : 리포트 생성 이벤트

Kafka --> Chat
Kafka --> Report
@enduml
